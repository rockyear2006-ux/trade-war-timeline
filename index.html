<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>中美贸易战时间线</title>
  <script src="https://unpkg.com/vis-timeline@latest/standalone/umd/vis-timeline-graph2d.min.js"></script>
  <link href="https://unpkg.com/vis-timeline@latest/styles/vis-timeline-graph2d.min.css" rel="stylesheet">
  <style>
    body { font-family: Arial, Helvetica, sans-serif; padding: 20px; }
  </style>
</head>
<body>
  <h2>中美贸易战最新进展（自动更新）</h2>
  <div id="timeline" style="height:350px;"></div>

  <script>
    /* 中文语言包 */
    const zhLocale = {
      current: '当前',
      time: '时间',
      date: '日期',
      weekdays: ['周日', '周一', '周二', '周三', '周四', '周五', '周六'],
      months: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月']
    };

    async function load() {
      const nodes = await fetch("event.json?" + Date.now()).then(r => r.json());
      const items = nodes.map((n, idx) => ({
        id: idx,
        content: n.title,
        start: n.date,
        className: n.type
      }));

      // 注册中文语言
      vis.timeline.locales['zh'] = zhLocale;

      new vis.Timeline(
        document.getElementById("timeline"),
        items,
        {
          width: "100%",
          height: "350px",
          locale: 'zh',          // 关键：指定用中文
          locales: vis.timeline.locales
        }
      );
    }

    load();
    setInterval(load, 120000); // 每 2 分钟刷新
  </script>

  <style>
    .red  { background: #ff4d4f; color: #fff; }
    .blue { background: #1890ff; color: #fff; }
    .gray { background: #bfbfbf; color: #fff; }
  </style>
</body>
</html>
